{% extends "flask_user_layout.html" %}
{% block content %}
<div class="container">
    <h2>Movies</h2>

    {% for m in movies %}
        <div class="panel panel-default">
            <div class="panel-heading"><b>{{ m.title }}</b></div>
            <div class="panel-body">
                <!-- Display genres -->
                <p>
                    {% for g in m.genres %}
                        <span class="label label-default">{{ g.genre }}</span>
                    {% endfor %}
                </p>
                <!-- Display IMDb and TMDb links if available -->
                {% if movie_links.get(m.id) %}
                    <p>IMDb: <a href="https://www.imdb.com/title/tt{{ movie_links[m.id].imdb_id }}" target="_blank">{{ movie_links[m.id].imdb_id }}</a></p>
                    <p>TMDb: <a href="https://www.themoviedb.org/movie/{{ movie_links[m.id].tmdb_id }}" target="_blank">{{ movie_links[m.id].tmdb_id }}</a></p>
                {% endif %}
                <!-- Display tags -->
                {% if movie_tags.get(m.id) %}
                    <p>Tags:
                        {% for tag in movie_tags[m.id] %}
                            <span>{{ tag.tag_content }}</span>{% if not loop.last %}, {% endif %}
                        {% endfor %}
                    </p>
                {% endif %}
                <!-- Display ratings -->
                {% if ratings.get(m.id) %}
                    <p>Ratings:</p>
                    <ul>
                        {% for rating in ratings[m.id] %}
                            <li>User {{ rating.user.first_name }}: {{ rating.rating }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
                
            </div>
              <div class="panel-footer">Rate:
                  <a href="#" class="card-link">1</a>
                  <a href="#" class="card-link">2</a>
                  <a href="#" class="card-link">3</a>
                  <a href="#" class="card-link">4</a>
                  <a href="#" class="card-link">5</a> Stars
              </div>
        </div>
    {% endfor %}
</div>

{% endblock %}
